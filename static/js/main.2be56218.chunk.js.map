{"version":3,"sources":["components/Ticket/Ticket.tsx","components/Tickets/Tickets.tsx","hooks/http.hook.ts","components/Loader/Loader.jsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Ticket","props","stops","ticket","currencyСode","className","carrier","price","departure_time","origin_name","departure_date","0","1","2","3","arrival_time","destination_name","arrival_date","Tickets","currentStateTickets","transfersFilter","length","valuesForTransferFilter","Object","values","reduce","acc","v","index","filteredTickets","filter","t","includes","map","useHttp","useState","tickets","setTickets","loading","setLoading","getPrice","a","axios","get","response","data","quotes","useEffect","getTickets","then","p","Loader","role","initStateTransfersFilter","withoutTransplant","oneTransplant","twoTransplants","threeTransplants","chekSvg","xmlns","width","height","fill","viewBox","d","App","setСurrencyСode","setCurrentStateTickets","setTransfersFilter","hendleClickModePriceUSD","e","outerText","target","priceUSDRUB","USDRUB","newCurrentStateTickets","Math","ceil","hendleClickModePriceEUR","priceUSDEUR","USDEUR","hendleClickTransfersFilter","filterName","btnClassPriceRUB","cn","btnClassPriceUSD","btnClassPriceEUR","onClick","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2be56218.chunk.js","sourcesContent":["import { type } from \"os\"\r\nimport React, { FC } from \"react\"\r\nimport { TicketType } from \"../../hooks/http.hook\"\r\nimport \"./Ticket.scss\"\r\n\r\ntype ITicketsProps = {\r\n    ticket: TicketType\r\n    currencyСode: string\r\n}\r\n\r\ntype Stops = 0 | 1 | 2 | 3\r\n\r\nconst getNumberStops = (stops: Stops) => {\r\n    const value = {\r\n        0: 'Без пересадок',\r\n        1: '1 пересадка',\r\n        2: '2 пересадки',\r\n        3: '3 пересадки'\r\n    }\r\n    return value[stops]\r\n}\r\n\r\nexport const Ticket: FC<|ITicketsProps> = (props) => {\r\n    const {ticket, currencyСode} = props\r\n    \r\n    return (\r\n        <div className=\"ticket\">\r\n            <div className=\"wrapper-price\">\r\n                <div className=\"ticket_company-name\">\r\n                    {ticket.carrier}\r\n                    </div>\r\n                <div className=\"ticket_price-wrapper\">\r\n                <div className=\"ticket_price\">\r\n                    <div>Купить</div>\r\n                    <div>{`за ${ticket.price}-${currencyСode}`}</div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"ticket_content\">\r\n                <div className=\"ticket_start-point\">\r\n                    <div className=\"ticket_data-time\">\r\n                        {ticket.departure_time}\r\n                    </div>\r\n                    <div className=\"ticket_data-city\">\r\n                        {ticket.origin_name}\r\n                    </div>\r\n                    <div className=\"ticket_data-date\">\r\n                        {ticket.departure_date}\r\n                    </div>\r\n                </div>\r\n                <div className=\"ticket_transfers\">{getNumberStops(ticket.stops)}</div>\r\n                <div className=\"ticket_end-point\">\r\n                <div className=\"ticket_data-time\">\r\n                        {ticket.arrival_time}\r\n                    </div>\r\n                    <div className=\"ticket_data-city\">\r\n                        {ticket.destination_name}\r\n                    </div>\r\n                    <div className=\"ticket_data-date\">\r\n                        {ticket.arrival_date}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n/*\r\narrival_date: \"12.05.18\"\r\narrival_time: \"22:10\"\r\ncarrier: \"TK\"\r\ndeparture_date: \"12.05.18\"\r\ndeparture_time: \"16:20\"\r\ndestination: \"TLV\"\r\ndestination_name: \"Тель-Авив\"\r\norigin: \"VVO\"\r\norigin_name: \"Владивосток\"\r\nprice: 12400\r\nstops: 3\r\n*/","import React, {FC} from \"react\";\r\nimport { TransfersFilterType } from \"../../App\";\r\nimport { TicketType } from \"../../hooks/http.hook\";\r\nimport { Ticket } from \"../Ticket/Ticket\";\r\n\r\ntype ITicketsProps = {\r\n    currentStateTickets: Array<TicketType>\r\n    transfersFilter: TransfersFilterType\r\n    currencyСode: string\r\n}\r\n\r\n\r\nexport const Tickets: FC<ITicketsProps> = (props) => {\r\n   const {currentStateTickets, transfersFilter, currencyСode} = props\r\n\r\n   if (props.currentStateTickets.length === 0) {\r\n    return (\r\n        <div>билетов нет</div>\r\n    )\r\n}\r\n\r\n   const valuesForTransferFilter: Array<number> = Object.values(transfersFilter).reduce((acc: Array<number>, v, index) => {\r\n    if (v) {\r\n      return [...acc, index]\r\n    }\r\n    return acc\r\n  }, [])\r\n\r\n  const filteredTickets: Array<TicketType> = currentStateTickets.filter(t => valuesForTransferFilter.includes(t.stops))\r\n        \r\n    return (\r\n        <div className=\"tickets_wrapper\">\r\n               {filteredTickets.map(t => <Ticket ticket={t} currencyСode={currencyСode}/>)}\r\n        </div>\r\n    )\r\n}","import axios from \"axios\"\r\nimport { useCallback, useEffect, useState } from \"react\"\r\n\r\nexport type TicketType = {\r\n    origin: string\r\n    origin_name: string\r\n    destination: string\r\n    destination_name: string\r\n    departure_date: string\r\n    departure_time: string\r\n    arrival_date: string\r\n    arrival_time: string\r\n    carrier: string\r\n    stops: 0 | 1 | 2 | 3\r\n    price: number\r\n}\r\n\r\nexport type TicketsType = Array<TicketType>\r\n\r\ntype UseHttpType = {\r\n    tickets: Array<TicketType>\r\n    loading: boolean\r\n    getPrice: () => Promise<any>\r\n}\r\n\r\n\r\nexport const useHttp = (): UseHttpType => {\r\n    const [tickets, setTickets] = useState<TicketsType>([])\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const getPrice = async (): Promise<object> => {\r\n        try {\r\n            const response = await axios.get('http://api.currencylayer.com/live?access_key=816daecdb6c897bdb6ffa5739cf6b342')\r\n            return response.data.quotes \r\n        } catch (error) {\r\n            throw error\r\n        }\r\n    }\r\n\r\n    async function getTickets<TicketsType>(): Promise<TicketsType> {\r\n        const response: TicketsType = await axios.get('/tickets.json')\r\n        return response\r\n       }\r\n\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        const response = getTickets()\r\n        response.then((p: any) => {\r\n            const {tickets} = p.data\r\n            setTickets(tickets)\r\n            setLoading(false)\r\n        })\r\n    }, [])\r\n\r\n    return {tickets, loading, getPrice}\r\n}","import React from 'react';\r\n\r\nexport const Loader = () => {\r\n    return (\r\n        <div className=\"spinner-border text-warning\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react';\nimport './App.scss';\nimport { Tickets } from './components/Tickets/Tickets'\nimport { TicketsType, useHttp } from './hooks/http.hook';\n//import { TicketType } from './hooks/http.hook';\nimport cn from 'classnames'\nimport { Loader } from './components/Loader/Loader';\n//import { Loader } from './components/Preloader/Loader';\n\nexport type TransfersFilterType = {\n  withoutTransplant: boolean\n  oneTransplant: boolean\n  twoTransplants: boolean\n  threeTransplants: boolean\n}\nconst initStateTransfersFilter: TransfersFilterType = {\n  withoutTransplant: true,\n  oneTransplant: true,\n  twoTransplants: true,\n  threeTransplants: true,\n}\n\nconst chekSvg = <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" className=\"bi bi-check\" viewBox=\"2 3 12 12\">\n  <path d=\"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z\" />\n</svg>\n\nfunction App() {\n  const { tickets, loading, getPrice } = useHttp()\n  const [currencyСode, setСurrencyСode] = useState('RUB')\n  //const [valutePrice, setValutePrice] = useState<number | null>(null)\n  const [currentStateTickets, setCurrentStateTickets] = useState<TicketsType>([])\n  const [transfersFilter, setTransfersFilter] = useState<TransfersFilterType>(initStateTransfersFilter)\n\n  const hendleClickModePriceUSD = async (e: any) => {\n    const { outerText } = e.target\n    setСurrencyСode(outerText)\n    const data = await getPrice()\n    const priceUSDRUB: number = data.USDRUB\n    const newCurrentStateTickets: TicketsType = tickets.map((t) => ({ ...t, price: Math.ceil(t.price / priceUSDRUB) }))\n    setCurrentStateTickets(newCurrentStateTickets)\n  }\n\n  const hendleClickModePriceRUB = (e: any): void => {\n    const { outerText } = e.target\n    setСurrencyСode(outerText)\n    setCurrentStateTickets(tickets)\n  }\n\n  const hendleClickModePriceEUR = async (e: any) => {\n    const { outerText } = e.target\n    setСurrencyСode(outerText)\n    const data = await getPrice()\n    const priceUSDRUB: number = data.USDRUB\n    const priceUSDEUR: number = data.USDEUR\n    const newCurrentStateTickets: TicketsType = tickets.map((t) => ({ ...t, price: Math.ceil((t.price / priceUSDRUB) * priceUSDEUR) }))\n    setCurrentStateTickets(newCurrentStateTickets)\n  }\n\n  const hendleClickTransfersFilter = (filterName: 'withoutTransplant' | 'oneTransplant' | 'twoTransplants' | 'threeTransplants') => () => {\n    setTransfersFilter({ ...transfersFilter, [filterName]: !transfersFilter[filterName] })\n\n  }\n\n  const btnClassPriceRUB = cn({\n    'mode_price-total': true,\n    'mode_price-rub': true,\n    'mode_price-active': currencyСode === 'RUB',\n  })\n  const btnClassPriceUSD = cn({\n    'mode_price-total': true,\n    'mode_price-usd': true,\n    'mode_price-active': currencyСode === 'USD',\n  })\n  const btnClassPriceEUR = cn({\n    'mode_price-total': true,\n    'mode_price-eur': true,\n    'mode_price-active': currencyСode === 'EUR',\n  })\n\n  useEffect(() => setCurrentStateTickets(tickets), [tickets])\n\n  return (\n    <div className=\"App\">\n      <div className=\"App_wrapper\">\n        <div className=\"modes\">\n          <div className=\"modes_price-title\">ВАЛЮТА</div>\n          <div className=\"modes_price\">\n            <div onClick={hendleClickModePriceRUB} className={btnClassPriceRUB}>RUB</div>\n            <div onClick={hendleClickModePriceUSD} className={btnClassPriceUSD}>USD</div>\n            <div onClick={hendleClickModePriceEUR} className={btnClassPriceEUR}>EUR</div>\n          </div>\n          <div className=\"modes_transfer\">\n            <div className=\"modes_transfer-title\">КОЛИЧЕСТВО ПЕРЕСАДОК</div>\n            <div className=\"modes_transfer-filtering\">\n              <div className=\"modes_transfer-filtering_wrapper\">\n                <div onClick={hendleClickTransfersFilter('withoutTransplant')} className=\"mode_transfer-item withoutTransplant\">\n                  <div className=\"checkbox\">\n                    {transfersFilter.withoutTransplant && chekSvg}\n                  </div>\n                  <div className=\"filter-name\">\n                    Без пересадок\n                  </div>\n                </div>\n                <div onClick={hendleClickTransfersFilter('oneTransplant')} className=\"mode_transfer-item oneTransplant\">\n                  <div className=\"checkbox\">\n                    {transfersFilter.oneTransplant && chekSvg}\n                  </div>\n                  <div className=\"filter-name\">\n                    1 пересадка\n                  </div>\n                </div>\n                <div onClick={hendleClickTransfersFilter('twoTransplants')} className=\"mode_transfer-item twoTransplants\">\n                  <div className=\"checkbox\">\n                    {transfersFilter.twoTransplants && chekSvg}\n                  </div>\n                  <div className=\"filter-name\">\n                    2 пересадки\n                  </div>\n                </div>\n                <div onClick={hendleClickTransfersFilter('threeTransplants')} className=\"mode_transfer-item threeTransplants\">\n                  <div className=\"checkbox\">\n                    {transfersFilter.threeTransplants && chekSvg}\n                  </div>\n                  <div className=\"filter-name\">\n                    3 пересадки\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"tickets\">\n          {loading ? <Loader/> : <Tickets currentStateTickets={currentStateTickets} \n                   transfersFilter={transfersFilter}\n                   currencyСode={currencyСode}\n           />}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}